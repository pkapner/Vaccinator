# //https://epicmychart.nychhc.org/MyChart/SignupAndSchedule/EmbeddedSchedule?id=RES,11736948,11736949,11736950,11736951,11736952,11736953,11736954,11736955,11736956,11736957,11736958,11736959,11703875,11703874,11703367,11703868,11703869,11703873,11703870,11703871,11703872,11708874&dept=1012009896,1020009908,1015009901,1011009919,1021009929,1022008535,1013009914,1014009903,1023009916,1021009930,1024009929,1025009903,1022008534,1023009915,1055009828,1050009831,1051009831,1052000031,1053009828,1054009831,1051102309,1011009920,&vt=11790692
from html.entities import name2codepoint

import requests
from html.parser import HTMLParser
#
# response = requests.get(
#     'https://epicmychart.nychhc.org/MyChart/SignupAndSchedule/EmbeddedSchedule?id=RES,11736948,11736949,11736950,11736951,11736952,11736953,11736954,11736955,11736956,11736957,11736958,11736959,11703875,11703874,11703367,11703868,11703869,11703873,11703870,11703871,11703872,11708874&dept=1012009896,1020009908,1015009901,1011009919,1021009929,1022008535,1013009914,1014009903,1023009916,1021009930,1024009929,1025009903,1022008534,1023009915,1055009828,1050009831,1051009831,1052000031,1053009828,1054009831,1051102309,1011009920,&vt=11790692',
#     verify=False)

from requests import Session

session = Session()

# HEAD requests ask for *just* the headers, which is all you need to grab the
# session cookie
session.head('https://epicmychart.nychhc.org/MyChart/SignupAndSchedule/EmbeddedSchedule?id=RES,11736948,11736949,11736950,11736951,11736952,11736953,11736954,11736955,11736956,11736957,11736958,11736959,11703875,11703874,11703367,11703868,11703869,11703873,11703870,11703871,11703872,11708874&dept=1012009896,1020009908,1015009901,1011009919,1021009929,1022008535,1013009914,1014009903,1023009916,1021009930,1024009929,1025009903,1022008534,1023009915,1055009828,1050009831,1051009831,1052000031,1053009828,1054009831,1051102309,1011009920,&vt=11790692')

response = session.post(
    url='https://epicmychart.nychhc.org/MyChart/OpenScheduling/OpenScheduling/GetOpeningsForProvider?noCache=0.6389496042170448',
    data={
        'noCache': '0.6389496042170448'
    },
    headers={
        'Referer': 'https://epicmychart.nychhc.org/MyChart/SignupAndSchedule/EmbeddedSchedule?id=RES,11736948,11736949,11736950,11736951,11736952,11736953,11736954,11736955,11736956,11736957,11736958,11736959,11703875,11703874,11703367,11703868,11703869,11703873,11703870,11703871,11703872,11708874&dept=1012009896,1020009908,1015009901,1011009919,1021009929,1022008535,1013009914,1014009903,1023009916,1021009930,1024009929,1025009903,1022008534,1023009915,1055009828,1050009831,1051009831,1052000031,1053009828,1054009831,1051102309,1011009920,&vt=11790692'
    }
, verify=False)

# print response.text
print (response.text)

